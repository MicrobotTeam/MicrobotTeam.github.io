'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&'function'==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?'symbol':typeof c};Vue.component('chat-block',{template:'#chat-block-template',props:{chatItem:Object,userList:Array}}),Vue.component('article-block',{template:'#article-block-template',props:{articleItem:Object,userList:Array,itemIndex:Number},data:function data(){return{showUserModal:!1,showUserTimer:null}},computed:{authorRef:function authorRef(){var c=this,g={username:'',nickname:'\u533F\u540D',blog_link:''};return this.userList.map(function(h){var j='object'===_typeof(c.articleItem.author)?c.articleItem.author.realname:c.articleItem.author;h.nickname===j&&(g=h)}),g}},methods:{hoverUserInfoHandler:function hoverUserInfoHandler(c){var g=this;c?(clearTimeout(this.showUserTimer),this.showUserModal=!0):this.showUserTimer=setTimeout(function(){g.showUserModal=!1},200)}}}),Vue.component('user-modal',{template:'#user-modal-template',props:{authorRef:Object}}),new Vue({el:'#app',data:{loading:!1,apiPath:{HOST:'https://errfe.linghit.com',GET_ARTICLES:'/api/transfer/blogmanage',GET_USERS:'/data/users.json'},userList:[],chatList:[]},methods:{groupBy:function groupBy(c,g){var h={};return c.forEach(function(i){var j=g(i);h[j]=h[j]||[],h[j].push(i)}),Object.keys(h).map(function(i){return{key:i,value:h[i]}})},ajax:function ajax(c,g){var h=new XMLHttpRequest;h.open('get',c,!0),h.send(),h.onreadystatechange=function(){if(4==h.readyState&&(200<=h.status&&300>h.status||304==h.status)){var i={};try{i='string'==typeof h.responseText?JSON.parse(h.responseText):h.responseText,g(i)}catch(j){console.log(j)}}}},getArticleData:function getArticleData(){var c=this;this.loading=!0,this.ajax(''+this.apiPath.HOST+this.apiPath.GET_ARTICLES+'?current=1&per_page=1000',function(g){if(1==g.code){var h=g.data.list;h.sort(function(j,k){var l='number'==typeof j.time?1e3*j.time:new Date(j.time.replace('-','/')).getTime(),m='number'==typeof k.time?1e3*k.time:new Date(k.time.replace('-','/')).getTime();return-(l-m)});var i=c.groupBy(h,function(j){var k='number'==typeof j.time?new Date(1e3*j.time):new Date(j.time.replace('-','/')),l=k.getFullYear()+'-'+(k.getMonth()+1);return l});c.chatList=i.map(function(j){return{date:j.key,articleList:j.value}}),c.loading=!1}})},getUsersData:function getUsersData(){var c=this;this.ajax(''+this.apiPath.GET_USERS,function(g){c.userList=g})}},created:function created(){this.getUsersData(),this.getArticleData()},mounted:function mounted(){particlesJS('particles-js',{particles:{color:'#ddd',shape:'triangle',opacity:0.3,size:1,size_random:!0,nb:150,line_linked:{enable_auto:!0,distance:100,color:'#ddd',opacity:1,width:1,condensed_mode:{enable:!0,rotateX:600,rotateY:600}},anim:{enable:!0,speed:1}},interactivity:{enable:!0,mouse:{distance:250},detect_on:'canvas',mode:'grab',line_linked:{opacity:.5},events:{onclick:{enable:!0,mode:'push',nb:4}}},retina_detect:!0})}});